Protocol

składowe aplikacji: server, client, pośrednik komunikatów

1. Serwer oczekuje na połączenie (pustą wiadomość) od klienta, czyli na prośbę o obsłużenie klienta (prośba o rejestrację/zalogowanie, subskrypcja tematu, wysyłanie wiadomości do klientów, którzy zasubskrypbowali, itd.). Serwer w danym momencie może obsłużyć tylko jednego klienta.

2. W sytuacji utraty połączenia z danym klientem, serwer przerywa to połączenie dzięki zaimplementowanemu mechanizmowi zabeczenia. Serwer ma ustawiony alarm, aby zbyt długie połączenie zostało przerwanie i możliwe było łączenie się z innymi klientami.

3. Klient może skorzystać z następujących opcji
1) Rejestracja - serwer wysyła klientowi liczbę obecnie zalogowanych klientów, na podstawie której generowany jest numer będący jednocześnie id klienta i adresem kolejki przypisanej do tego klienta. Na tą kolejkę klient będzie otrzymywać wiadomości na zasubskrybowany przez siebie temat.

2) Subskrypcja tematu - klient podaje temat, który chciałby otrzymywać wiadomości i ta informacja jest przekazywana do serwera. Serwer ma połączenie z bazą danych i jeśli podany temat (który posiada swój adres) nie istnieje w bazie, to jest tworzony i klient jest do niego przypisywany, a jeśli już jest w bazie, to klient jest dołączany do pozostałych klientów, którzy ten temat już zasubskyrbowali.

3) Odebranie wiadomości - serwer odbiera wiadomości wysyłane przez klientów, a następne rozsyła je do klientów, którzy zasubskrybowali ten sam temat.

4. Serwer posiada bazę danych, która działa w oparciu o strukturę danych linked list - jest to lista dwuwymiarowa, zagnieżdżona: składa się z tematów w postaci list, na których są zapisani subskrybenci danego tematu. W chwili odbioru wiadomości serwer odczytuje nadawcę i jego zasubskrybowany temat, odszukuje odpowiedni wpis w bazie opatrzony tym tematem i rozsyła wiadomość do subskrybentów tego odszukanego tematu. 

5. Kiedy użytkownik chce dołączyć do serwera, program klienta zczytuje z klawiatury wprowadzone przez niego dane - nazwę użytkownika i temat, który chce subskrybować. Następnie program klienta wykorzystuje te dane, aby nawiązać połączenie z serwerem. Po zarejestrowaniu w serwerze program klient zczytuje wiadomości wprowadzane przez użytkownika, aby przekazać je innym subskrybentom za pośrednictwem serwera.
